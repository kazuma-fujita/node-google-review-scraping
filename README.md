# Google 店舗クチコミ情報スクレイピング実行方法

## 実行環境を作成する

[Node.js/Puppeteer で Google の店舗クチコミ情報をスクレイピングする](https://zuma-lab.com/posts/node-web-scraping) に詳しい環境作成手順を書きましたので、手順に沿って環境を作成してください。

## 検索キーワードを設定する

まず検索する店舗名の検索を記述する `src/review/input/search_keywords.txt` ファイルを作成します。

検索したい店舗の検索キーワードを追記してください。

注意点として、必ず検索結果にクチコミが存在する検索キーワードを追記してください。

クチコミが存在しない場合、スクリプト実行時にエラーを返します。

- 検索キーワード設定例

```
中華そば 初代修
麺や くぬぎ
中華そば ムタヒロ 1号店
```

## 抽出キーワードを設定する

欲しい情報のみのクチコミに絞り込みたい場合、抽出キーワードを設定します。

※ クチコミ全件取得する場合この設定は必要ありません。

`src/review/input/contain_keywords.txt` ファイルを作成します。

抽出したいキーワードを追記してください。

- 抽出キーワード設定例

```
混雑
態度
美味い
```

## スクレイピングを実行する

それでは以下コマンドを実行してスクレピングを実行しましょう。

```
node src/review/main.js
```

Chromium が立ち上がり、 search_keywords.txt に記述した検索キーワードで Google 検索が実行されます。

その後クチコミ一覧ダイアログが起動し画面スクロールして「もっと見る」リンクが開きます。

クチコミ件数が多いとこの処理に時間がかかりますが気長に待ちましょう。

以下のログが表示されたら処理の完了です。

```
Output csv complete.
```

output ディレクトリに shop_review_yyyy-MM-dd.csv が作成されていることを確認してください。
